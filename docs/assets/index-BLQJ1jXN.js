import{r as Z,g as Q}from"./vendor-Czn-76cG.js";import{g as J,a as w,e as F,b as ee,c as te,d as Y,m as z,s as R,f as ae,h as V,i as q,j as ne,S as ie}from"./swiper-5vHbYaTT.js";(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))l(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&l(o)}).observe(document,{childList:!0,subtree:!0});function a(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function l(i){if(i.ep)return;i.ep=!0;const s=a(i);fetch(i.href,s)}})();class se{constructor(r){this.pages=r,this.currentIndex=0,this.isAnimating=!1,this.btnBack=document.getElementById("btn-back"),this.btnNext=document.getElementById("btn-next"),this.btnStart=document.getElementById("btn-start"),this.dotsContainer=document.getElementById("dots"),this.bottomBar=document.getElementById("bottom-bar"),this._initDots(),this._bindEvents(),this._update()}_initDots(){this.dotsContainer.innerHTML="";for(let r=1;r<this.pages.length;r++){const a=document.createElement("span");a.className="dot",this.dotsContainer.appendChild(a)}}_bindEvents(){this.btnBack.addEventListener("click",()=>this.back()),this.btnNext.addEventListener("click",()=>this.next()),this.btnStart&&this.btnStart.addEventListener("click",a=>{a.stopPropagation(),this.next()});const r=document.getElementById(`page-${this.pages[0]}`);r&&r.addEventListener("click",()=>this.next())}next(){this.isAnimating||this.currentIndex>=this.pages.length-1||this._animateTo(this.currentIndex+1,"forward")}back(){this.isAnimating||this.currentIndex<=0||this._animateTo(this.currentIndex-1,"backward")}_animateTo(r,a){this.isAnimating=!0;const l=document.getElementById(`page-${this.pages[this.currentIndex]}`),i=document.getElementById(`page-${this.pages[r]}`),s=300,f=window.matchMedia("(prefers-reduced-motion: reduce)").matches?10:s;i.style.transition="none",i.style.transform=a==="forward"?"translateX(100%)":"translateX(-100%)",i.classList.add("page-active"),i.offsetHeight;const c=`transform ${s}ms cubic-bezier(0.4, 0, 0.2, 1)`;l.style.transition=c,l.style.transform=a==="forward"?"translateX(-100%)":"translateX(100%)",i.style.transition=c,i.style.transform="translateX(0)",this.currentIndex=r,this._update(),setTimeout(()=>{l.classList.remove("page-active"),l.style.transition="",l.style.transform="",i.style.transition="",i.style.transform="",this.isAnimating=!1},f)}_update(){const r=this.currentIndex===0,a=this.currentIndex===this.pages.length-1;this.bottomBar.classList.toggle("hidden",r),this.btnBack.setAttribute("aria-hidden",String(r)),this.btnNext.setAttribute("aria-hidden",String(a)),this.dotsContainer.querySelectorAll(".dot").forEach((i,s)=>{i.classList.toggle("dot-active",s+1===this.currentIndex)})}}var re=Z();const le=Q(re);async function oe(e="./data.csv"){try{const r=await fetch(e);if(!r.ok)throw new Error(`Fehler beim Laden der CSV-Datei: HTTP ${r.status}`);const a=await r.text();return new Promise((l,i)=>{le.parse(a,{header:!0,skipEmptyLines:!0,dynamicTyping:!0,complete:s=>{const o=K(s.data);l(o)},error:s=>{i(s)}})})}catch(r){throw console.error("Error loading CSV:",r),r}}function K(e){return{teilA:de(e,["frage_a1","frage_a2","frage_a3","frage_a4","frage_a5","frage_a6","frage_a7"]),teilB:j(e,["frage_b1","frage_b2","frage_b3","frage_b4","frage_b5","frage_b6","frage_b7","frage_b8","frage_b9"]),teilC:j(e,["frage_c1","frage_c2","frage_c3","frage_c4","frage_c5","frage_c6","frage_c7"]),abschiebsbriefe:e.map(r=>r.abschiedsbrief).filter(Boolean),zeichnungen:e.map(r=>r.zeichnung_datei).filter(Boolean),teilnehmerAnzahl:e.length,rawRows:e}}function ce(e,r){if(!e)return K([]);const a=r==="alle"?e:e.filter(l=>l.zugehoerigkeit===r);return K(a)}function de(e,r){return r.map(a=>{const l=e.map(c=>c[a]).filter(c=>c!=null&&c>=1&&c<=5);if(l.length===0)return{median:0,mean:0};const i=l.reduce((c,p)=>c+p,0)/l.length,s=[...l].sort((c,p)=>c-p),o=Math.floor(s.length/2),f=s.length%2===0?(s[o-1]+s[o])/2:s[o];return{median:Number(f.toFixed(2)),mean:Number(i.toFixed(2))}})}function j(e,r){return r.map(a=>{const l={};let i=0;return e.forEach(s=>{const o=s[a];o!=null&&(l[o]=(l[o]||0)+1,i++)}),Object.entries(l).map(([s,o])=>({option:String(s),count:o,percentage:Number((o/i*100).toFixed(1))})).sort((s,o)=>o.count-s.count)})}const fe=["Ich empfinde eine tiefe Loyalität gegenüber zusammengehörigen Socken.","Der Verlust einer Socke beeinflusst meine emotionale Grundstimmung messbar.","Ich habe schon einmal aktiv nach einer einzelnen Socke gesucht, obwohl die Wahrscheinlichkeit gering war.","Gemusterte Socken vermitteln mir mehr Identitätsstabilität als einfarbige.","Ich glaube, dass Socken im Wäschekorb soziale Bindungen eingehen.","Zwei unterschiedliche Socken zu tragen fühlt sich rebellisch-autonom an.","Das Wegwerfen einer Einzelsocke ist ein Akt innerer Reife."],G=["nie","selten","manchmal","oft","immer"];function U(e){return`${(e-1)/4*100}%`}function ue(e,r,a,l){const i=document.createElement("div");i.className="visualization-card",i.setAttribute("aria-label",`Frage A${l+1}: ${e}`);const s=Number(r).toFixed(1),o=Number(a).toFixed(1),f=Math.abs(r-a)<.4,c=f?"transform: translateY(-36px);":"",p=f?"transform: translateY(-4px);":"";return i.innerHTML=`
    <div class="visualization-card-index">A${l+1}</div>
    <div class="visualization-title">${e}</div>
    <div class="likert-scale" role="img" aria-label="Likert-Skala: Median ${s}, Durchschnitt ${o}">
      <div class="likert-track">
        <div class="likert-ticks">
          ${G.map(()=>'<div class="likert-tick"></div>').join("")}
        </div>
        <div class="likert-markers">
          <div class="likert-marker median" style="left: ${U(r)}">
            <span class="likert-marker-label" style="${c}" aria-hidden="true">${s}</span>
            <div class="likert-marker-dot" title="Median: ${s}"></div>
          </div>
          <div class="likert-marker mean" style="left: ${U(a)}">
            <span class="likert-marker-label" style="${p}" aria-hidden="true">${o}</span>
            <div class="likert-marker-dot" title="Durchschnitt: ${o}"></div>
          </div>
        </div>
      </div>
      <div class="likert-labels" aria-hidden="true">
        ${G.map($=>`<span>${$}</span>`).join("")}
      </div>
    </div>
    <div class="likert-legend" aria-hidden="true">
      <div class="likert-legend-item">
        <div class="likert-legend-dot median"></div>
        <span>Median: ${s}</span>
      </div>
      <div class="likert-legend-item">
        <div class="likert-legend-dot mean"></div>
        <span>Durchschnitt: ${o}</span>
      </div>
    </div>
  `,i}function ge(e){const r=new IntersectionObserver(a=>{a.forEach(l=>{l.isIntersecting&&(l.target.classList.add("visible"),r.unobserve(l.target))})},{threshold:.12,rootMargin:"0px 0px -40px 0px"});e.forEach(a=>r.observe(a))}function O(e,r){const a=document.getElementById(e);if(!a)return;a.innerHTML="";const l=Array.isArray(r)&&r.length>0;fe.forEach((s,o)=>{const{median:f,mean:c}=l&&r[o]?r[o]:{median:0,mean:0},p=ue(s,f,c,o);a.appendChild(p)});const i=a.querySelectorAll(".visualization-card");ge(i)}const P=[{title:"In einem Szenario textiler Destabilisierung bevorzuge ich:",options:["Erhalt beider, jedoch perforierter Socken","Vollständige Eliminierung einer einzelnen Socke"]},{title:"Ich priorisiere bei textiler Auswahl:",options:["Maximale visuelle Kongruenz","Maximale individualistische Divergenz"]},{title:"Im Kontext langfristiger Nutzung bewerte ich als bedeutsamer:",options:["Strukturelle Haltbarkeit","Ästhetische Musterkomplexität"]},{title:"Bei drohendem Sockenschwund neige ich eher zu:",options:["Aktiver Suchinitiative","Akzeptanzbasierter Verlustverarbeitung"]},{title:"In Bezug auf textile Paarbildung empfinde ich als zentraler:",options:["Symmetrische Gleichwertigkeit","Funktionale Ergänzung"]},{title:"Bei geringfügiger Asymmetrie reagiere ich überwiegend mit:",options:["Kognitiver Dissonanz","Flexibler Integrationsbereitschaft"]},{title:"Im Falle chronischer Einzelsocken-Situation tendiere ich zu:",options:["Persistierender Hoffnung","Adaptiver Neubildung"]},{title:"Innerhalb der Sockenschublade erachte ich als stabilisierender:",options:["Klare kategoriale Ordnung","Emergente Koexistenz"]},{title:"Bei erhöhtem Stressniveau greife ich überwiegend auf:",options:["Vertrautes Sockenduo","Funktional austauschbare Einheiten"]}],H=[{title:"Bevorzugte Sockenlänge:",options:["Keine Socken","No-Show","Knöchellänge","Mittlere Länge","Knielang","Situationsabhängig"]},{title:"Falt-/Lagerungsstrategie:",options:["Überlappungsfaltung","Kompressionsbasierte Bündelung","Lineare Parallelfaltung","Unstrukturierte Ablage"]},{title:"Farbkategorie:",options:["Achromatische Töne","Gedämpfte Chromatik","Helle/kontrastreiche Farben","Situationsabhängig"]},{title:"Textile Oberflächenpräferenz:",options:["Überwiegend unifarben","Gelegentlich gemustert","Überwiegend gemustert","Muster als Identitätsmerkmal"]},{title:"Affektive Veränderung bei gemusterten Socken:",options:["Stimmungsaufhellung","Erhöhte Selbstwirksamkeit","Keine Veränderung","Keine Angabe"]},{title:"Reaktion auf veränderte Sockenschublade:",options:["Keine Reaktion","Kurzfristige Irritation","Wahrnehmbarer Ordnungsimpuls","Deutliche Dysregulation"]},{title:"Häufigkeit des Tragens identischer Socken an aufeinanderfolgenden Tagen:",options:["Nie","Selten","Gelegentlich","Regelmäßig","Immer"]}];function _(e,r,a){const l=document.getElementById(e);if(!l)return;l.innerHTML="",r.forEach((o,f)=>{if(!o||o.length===0)return;const c=a[f];if(!c)return;const p=me(c.title,o,c.options);l.appendChild(p)});const i=l.querySelectorAll(".visualization-card"),s=new IntersectionObserver(o=>{o.forEach(f=>{f.isIntersecting&&(f.target.classList.add("visible"),f.target.querySelectorAll(".bar-fill").forEach(c=>{c.classList.add("animate")}),s.unobserve(f.target))})},{threshold:.2});i.forEach(o=>s.observe(o))}function me(e,r,a){const l=document.createElement("div");l.className="visualization-card",l.setAttribute("role","region"),l.setAttribute("aria-label",e);const i=r.map(s=>{const o=parseInt(s.option,10),f=a[o]!==void 0?a[o]:`Option ${s.option}`,c=Number(s.percentage).toFixed(1),p=s.percentage>=15;return`
      <div class="bar-chart-item">
        <div class="bar-label">${f}</div>
        <div class="bar-container">
          <div class="bar-fill" style="--bar-width: ${c}%" title="${c}%">
            ${p?`<span class="bar-percentage">${c}%</span>`:""}
          </div>
        </div>
        ${p?"":`<span class="bar-percentage-outside">${c}%</span>`}
      </div>
    `}).join("");return l.innerHTML=`
    <div class="visualization-title">${e}</div>
    <div class="bar-chart">
      ${i}
    </div>
  `,l}function he({swiper:e,extendParams:r,on:a,emit:l}){const i=J(),s=w();e.keyboard={enabled:!1},r({keyboard:{enabled:!1,onlyInViewport:!0,pageUpDown:!0,speed:void 0}});function o(p){if(!e.enabled)return;const{rtlTranslate:$}=e;let g=p;g.originalEvent&&(g=g.originalEvent);const y=g.keyCode||g.charCode,A=e.params.keyboard.pageUpDown,x=A&&y===33,h=A&&y===34,M=y===37,t=y===39,n=y===38,d=y===40;if(!e.allowSlideNext&&(e.isHorizontal()&&t||e.isVertical()&&d||h)||!e.allowSlidePrev&&(e.isHorizontal()&&M||e.isVertical()&&n||x))return!1;if(g.shiftKey||g.altKey||g.ctrlKey||g.metaKey||i.activeElement&&(i.activeElement.isContentEditable||i.activeElement.nodeName&&(i.activeElement.nodeName.toLowerCase()==="input"||i.activeElement.nodeName.toLowerCase()==="textarea")))return;if(e.params.keyboard.onlyInViewport&&(x||h||M||t||n||d)){let C=!1;if(F(e.el,`.${e.params.slideClass}, swiper-slide`).length>0&&F(e.el,`.${e.params.slideActiveClass}`).length===0)return;const L=e.el,T=L.clientWidth,b=L.clientHeight,I=s.innerWidth,E=s.innerHeight,S=ee(L);$&&(S.left-=L.scrollLeft);const v=[[S.left,S.top],[S.left+T,S.top],[S.left,S.top+b],[S.left+T,S.top+b]];for(let m=0;m<v.length;m+=1){const k=v[m];if(k[0]>=0&&k[0]<=I&&k[1]>=0&&k[1]<=E){if(k[0]===0&&k[1]===0)continue;C=!0}}if(!C)return}const u=e.params.keyboard.speed;e.isHorizontal()?((x||h||M||t)&&(g.preventDefault?g.preventDefault():g.returnValue=!1),((h||t)&&!$||(x||M)&&$)&&e.slideNext(u),((x||M)&&!$||(h||t)&&$)&&e.slidePrev(u)):((x||h||n||d)&&(g.preventDefault?g.preventDefault():g.returnValue=!1),(h||d)&&e.slideNext(u),(x||n)&&e.slidePrev(u)),l("keyPress",y)}function f(){e.keyboard.enabled||(i.addEventListener("keydown",o),e.keyboard.enabled=!0)}function c(){e.keyboard.enabled&&(i.removeEventListener("keydown",o),e.keyboard.enabled=!1)}a("init",()=>{e.params.keyboard.enabled&&f()}),a("destroy",()=>{e.keyboard.enabled&&c()}),Object.assign(e.keyboard,{enable:f,disable:c})}function pe(e,r,a,l){return e.params.createElements&&Object.keys(l).forEach(i=>{if(!a[i]&&a.auto===!0){let s=te(e.el,`.${l[i]}`)[0];s||(s=Y("div",l[i]),s.className=l[i],e.el.append(s)),a[i]=s,r[i]=s}}),a}function D(e=""){return`.${e.trim().replace(/([\.:!+\/()[\]#>~*^$|=,'"@{}\\])/g,"\\$1").replace(/ /g,".")}`}function be({swiper:e,extendParams:r,on:a,emit:l}){const i="swiper-pagination";r({pagination:{el:null,bulletElement:"span",clickable:!1,hideOnClick:!1,renderBullet:null,renderProgressbar:null,renderFraction:null,renderCustom:null,progressbarOpposite:!1,type:"bullets",dynamicBullets:!1,dynamicMainBullets:1,formatFractionCurrent:t=>t,formatFractionTotal:t=>t,bulletClass:`${i}-bullet`,bulletActiveClass:`${i}-bullet-active`,modifierClass:`${i}-`,currentClass:`${i}-current`,totalClass:`${i}-total`,hiddenClass:`${i}-hidden`,progressbarFillClass:`${i}-progressbar-fill`,progressbarOppositeClass:`${i}-progressbar-opposite`,clickableClass:`${i}-clickable`,lockClass:`${i}-lock`,horizontalClass:`${i}-horizontal`,verticalClass:`${i}-vertical`,paginationDisabledClass:`${i}-disabled`}}),e.pagination={el:null,bullets:[]};let s,o=0;function f(){return!e.params.pagination.el||!e.pagination.el||Array.isArray(e.pagination.el)&&e.pagination.el.length===0}function c(t,n){const{bulletActiveClass:d}=e.params.pagination;t&&(t=t[`${n==="prev"?"previous":"next"}ElementSibling`],t&&(t.classList.add(`${d}-${n}`),t=t[`${n==="prev"?"previous":"next"}ElementSibling`],t&&t.classList.add(`${d}-${n}-${n}`)))}function p(t,n,d){if(t=t%d,n=n%d,n===t+1)return"next";if(n===t-1)return"previous"}function $(t){const n=t.target.closest(D(e.params.pagination.bulletClass));if(!n)return;t.preventDefault();const d=V(n)*e.params.slidesPerGroup;if(e.params.loop){if(e.realIndex===d)return;const u=p(e.realIndex,d,e.slides.length);u==="next"?e.slideNext():u==="previous"?e.slidePrev():e.slideToLoop(d)}else e.slideTo(d)}function g(){const t=e.rtl,n=e.params.pagination;if(f())return;let d=e.pagination.el;d=z(d);let u,C;const L=e.virtual&&e.params.virtual.enabled?e.virtual.slides.length:e.slides.length,T=e.params.loop?Math.ceil(L/e.params.slidesPerGroup):e.snapGrid.length;if(e.params.loop?(C=e.previousRealIndex||0,u=e.params.slidesPerGroup>1?Math.floor(e.realIndex/e.params.slidesPerGroup):e.realIndex):typeof e.snapIndex<"u"?(u=e.snapIndex,C=e.previousSnapIndex):(C=e.previousIndex||0,u=e.activeIndex||0),n.type==="bullets"&&e.pagination.bullets&&e.pagination.bullets.length>0){const b=e.pagination.bullets;let I,E,S;if(n.dynamicBullets&&(s=ae(b[0],e.isHorizontal()?"width":"height"),d.forEach(v=>{v.style[e.isHorizontal()?"width":"height"]=`${s*(n.dynamicMainBullets+4)}px`}),n.dynamicMainBullets>1&&C!==void 0&&(o+=u-(C||0),o>n.dynamicMainBullets-1?o=n.dynamicMainBullets-1:o<0&&(o=0)),I=Math.max(u-o,0),E=I+(Math.min(b.length,n.dynamicMainBullets)-1),S=(E+I)/2),b.forEach(v=>{const m=[...["","-next","-next-next","-prev","-prev-prev","-main"].map(k=>`${n.bulletActiveClass}${k}`)].map(k=>typeof k=="string"&&k.includes(" ")?k.split(" "):k).flat();v.classList.remove(...m)}),d.length>1)b.forEach(v=>{const m=V(v);m===u?v.classList.add(...n.bulletActiveClass.split(" ")):e.isElement&&v.setAttribute("part","bullet"),n.dynamicBullets&&(m>=I&&m<=E&&v.classList.add(...`${n.bulletActiveClass}-main`.split(" ")),m===I&&c(v,"prev"),m===E&&c(v,"next"))});else{const v=b[u];if(v&&v.classList.add(...n.bulletActiveClass.split(" ")),e.isElement&&b.forEach((m,k)=>{m.setAttribute("part",k===u?"bullet-active":"bullet")}),n.dynamicBullets){const m=b[I],k=b[E];for(let B=I;B<=E;B+=1)b[B]&&b[B].classList.add(...`${n.bulletActiveClass}-main`.split(" "));c(m,"prev"),c(k,"next")}}if(n.dynamicBullets){const v=Math.min(b.length,n.dynamicMainBullets+4),m=(s*v-s)/2-S*s,k=t?"right":"left";b.forEach(B=>{B.style[e.isHorizontal()?k:"top"]=`${m}px`})}}d.forEach((b,I)=>{if(n.type==="fraction"&&(b.querySelectorAll(D(n.currentClass)).forEach(E=>{E.textContent=n.formatFractionCurrent(u+1)}),b.querySelectorAll(D(n.totalClass)).forEach(E=>{E.textContent=n.formatFractionTotal(T)})),n.type==="progressbar"){let E;n.progressbarOpposite?E=e.isHorizontal()?"vertical":"horizontal":E=e.isHorizontal()?"horizontal":"vertical";const S=(u+1)/T;let v=1,m=1;E==="horizontal"?v=S:m=S,b.querySelectorAll(D(n.progressbarFillClass)).forEach(k=>{k.style.transform=`translate3d(0,0,0) scaleX(${v}) scaleY(${m})`,k.style.transitionDuration=`${e.params.speed}ms`})}n.type==="custom"&&n.renderCustom?(R(b,n.renderCustom(e,u+1,T)),I===0&&l("paginationRender",b)):(I===0&&l("paginationRender",b),l("paginationUpdate",b)),e.params.watchOverflow&&e.enabled&&b.classList[e.isLocked?"add":"remove"](n.lockClass)})}function y(){const t=e.params.pagination;if(f())return;const n=e.virtual&&e.params.virtual.enabled?e.virtual.slides.length:e.grid&&e.params.grid.rows>1?e.slides.length/Math.ceil(e.params.grid.rows):e.slides.length;let d=e.pagination.el;d=z(d);let u="";if(t.type==="bullets"){let C=e.params.loop?Math.ceil(n/e.params.slidesPerGroup):e.snapGrid.length;e.params.freeMode&&e.params.freeMode.enabled&&C>n&&(C=n);for(let L=0;L<C;L+=1)t.renderBullet?u+=t.renderBullet.call(e,L,t.bulletClass):u+=`<${t.bulletElement} ${e.isElement?'part="bullet"':""} class="${t.bulletClass}"></${t.bulletElement}>`}t.type==="fraction"&&(t.renderFraction?u=t.renderFraction.call(e,t.currentClass,t.totalClass):u=`<span class="${t.currentClass}"></span> / <span class="${t.totalClass}"></span>`),t.type==="progressbar"&&(t.renderProgressbar?u=t.renderProgressbar.call(e,t.progressbarFillClass):u=`<span class="${t.progressbarFillClass}"></span>`),e.pagination.bullets=[],d.forEach(C=>{t.type!=="custom"&&R(C,u||""),t.type==="bullets"&&e.pagination.bullets.push(...C.querySelectorAll(D(t.bulletClass)))}),t.type!=="custom"&&l("paginationRender",d[0])}function A(){e.params.pagination=pe(e,e.originalParams.pagination,e.params.pagination,{el:"swiper-pagination"});const t=e.params.pagination;if(!t.el)return;let n;typeof t.el=="string"&&e.isElement&&(n=e.el.querySelector(t.el)),!n&&typeof t.el=="string"&&(n=[...document.querySelectorAll(t.el)]),n||(n=t.el),!(!n||n.length===0)&&(e.params.uniqueNavElements&&typeof t.el=="string"&&Array.isArray(n)&&n.length>1&&(n=[...e.el.querySelectorAll(t.el)],n.length>1&&(n=n.find(d=>F(d,".swiper")[0]===e.el))),Array.isArray(n)&&n.length===1&&(n=n[0]),Object.assign(e.pagination,{el:n}),n=z(n),n.forEach(d=>{t.type==="bullets"&&t.clickable&&d.classList.add(...(t.clickableClass||"").split(" ")),d.classList.add(t.modifierClass+t.type),d.classList.add(e.isHorizontal()?t.horizontalClass:t.verticalClass),t.type==="bullets"&&t.dynamicBullets&&(d.classList.add(`${t.modifierClass}${t.type}-dynamic`),o=0,t.dynamicMainBullets<1&&(t.dynamicMainBullets=1)),t.type==="progressbar"&&t.progressbarOpposite&&d.classList.add(t.progressbarOppositeClass),t.clickable&&d.addEventListener("click",$),e.enabled||d.classList.add(t.lockClass)}))}function x(){const t=e.params.pagination;if(f())return;let n=e.pagination.el;n&&(n=z(n),n.forEach(d=>{d.classList.remove(t.hiddenClass),d.classList.remove(t.modifierClass+t.type),d.classList.remove(e.isHorizontal()?t.horizontalClass:t.verticalClass),t.clickable&&(d.classList.remove(...(t.clickableClass||"").split(" ")),d.removeEventListener("click",$))})),e.pagination.bullets&&e.pagination.bullets.forEach(d=>d.classList.remove(...t.bulletActiveClass.split(" ")))}a("changeDirection",()=>{if(!e.pagination||!e.pagination.el)return;const t=e.params.pagination;let{el:n}=e.pagination;n=z(n),n.forEach(d=>{d.classList.remove(t.horizontalClass,t.verticalClass),d.classList.add(e.isHorizontal()?t.horizontalClass:t.verticalClass)})}),a("init",()=>{e.params.pagination.enabled===!1?M():(A(),y(),g())}),a("activeIndexChange",()=>{typeof e.snapIndex>"u"&&g()}),a("snapIndexChange",()=>{g()}),a("snapGridLengthChange",()=>{y(),g()}),a("destroy",()=>{x()}),a("enable disable",()=>{let{el:t}=e.pagination;t&&(t=z(t),t.forEach(n=>n.classList[e.enabled?"remove":"add"](e.params.pagination.lockClass)))}),a("lock unlock",()=>{g()}),a("click",(t,n)=>{const d=n.target,u=z(e.pagination.el);if(e.params.pagination.el&&e.params.pagination.hideOnClick&&u&&u.length>0&&!d.classList.contains(e.params.pagination.bulletClass)){if(e.navigation&&(e.navigation.nextEl&&d===e.navigation.nextEl||e.navigation.prevEl&&d===e.navigation.prevEl))return;const C=u[0].classList.contains(e.params.pagination.hiddenClass);l(C===!0?"paginationShow":"paginationHide"),u.forEach(L=>L.classList.toggle(e.params.pagination.hiddenClass))}});const h=()=>{e.el.classList.remove(e.params.pagination.paginationDisabledClass);let{el:t}=e.pagination;t&&(t=z(t),t.forEach(n=>n.classList.remove(e.params.pagination.paginationDisabledClass))),A(),y(),g()},M=()=>{e.el.classList.add(e.params.pagination.paginationDisabledClass);let{el:t}=e.pagination;t&&(t=z(t),t.forEach(n=>n.classList.add(e.params.pagination.paginationDisabledClass))),x()};Object.assign(e.pagination,{enable:h,disable:M,render:y,update:g,init:A,destroy:x})}function ve(e){const{effect:r,swiper:a,on:l,setTranslate:i,setTransition:s,overwriteParams:o,perspective:f,recreateShadows:c,getEffectParams:p}=e;l("beforeInit",()=>{if(a.params.effect!==r)return;a.classNames.push(`${a.params.containerModifierClass}${r}`),f&&f()&&a.classNames.push(`${a.params.containerModifierClass}3d`);const g=o?o():{};Object.assign(a.params,g),Object.assign(a.originalParams,g)}),l("setTranslate _virtualUpdated",()=>{a.params.effect===r&&i()}),l("setTransition",(g,y)=>{a.params.effect===r&&s(y)}),l("transitionEnd",()=>{if(a.params.effect===r&&c){if(!p||!p().slideShadows)return;a.slides.forEach(g=>{g.querySelectorAll(".swiper-slide-shadow-top, .swiper-slide-shadow-right, .swiper-slide-shadow-bottom, .swiper-slide-shadow-left").forEach(y=>y.remove())}),c()}});let $;l("virtualUpdate",()=>{a.params.effect===r&&(a.slides.length||($=!0),requestAnimationFrame(()=>{$&&a.slides&&a.slides.length&&(i(),$=!1)}))})}function ye(e,r){const a=q(r);return a!==r&&(a.style.backfaceVisibility="hidden",a.style["-webkit-backface-visibility"]="hidden"),a}function ke({swiper:e,duration:r,transformElements:a,allSlides:l}){const{activeIndex:i}=e,s=o=>o.parentElement?o.parentElement:e.slides.find(c=>c.shadowRoot&&c.shadowRoot===o.parentNode);if(e.params.virtualTranslate&&r!==0){let o=!1,f;l?f=a:f=a.filter(c=>{const p=c.classList.contains("swiper-slide-transform")?s(c):c;return e.getSlideIndex(p)===i}),f.forEach(c=>{ne(c,()=>{if(o||!e||e.destroyed)return;o=!0,e.animating=!1;const p=new window.CustomEvent("transitionend",{bubbles:!0,cancelable:!0});e.wrapperEl.dispatchEvent(p)})})}}function Ce(e,r,a){const l=`swiper-slide-shadow${` swiper-slide-shadow-${e}`}`,i=q(r);let s=i.querySelector(`.${l.split(" ").join(".")}`);return s||(s=Y("div",l.split(" ")),i.append(s)),s}function Ee({swiper:e,extendParams:r,on:a}){r({cardsEffect:{slideShadows:!0,rotate:!0,perSlideRotate:2,perSlideOffset:8}}),ve({effect:"cards",swiper:e,on:a,setTranslate:()=>{const{slides:s,activeIndex:o,rtlTranslate:f}=e,c=e.params.cardsEffect,{startTranslate:p,isTouched:$}=e.touchEventsData,g=f?-e.translate:e.translate;for(let y=0;y<s.length;y+=1){const A=s[y],x=A.progress,h=Math.min(Math.max(x,-4),4);let M=A.swiperSlideOffset;e.params.centeredSlides&&!e.params.cssMode&&(e.wrapperEl.style.transform=`translateX(${e.minTranslate()}px)`),e.params.centeredSlides&&e.params.cssMode&&(M-=s[0].swiperSlideOffset);let t=e.params.cssMode?-M-e.translate:-M,n=0;const d=-100*Math.abs(h);let u=1,C=-c.perSlideRotate*h,L=c.perSlideOffset-Math.abs(h)*.75;const T=e.virtual&&e.params.virtual.enabled?e.virtual.from+y:y,b=(T===o||T===o-1)&&h>0&&h<1&&($||e.params.cssMode)&&g<p,I=(T===o||T===o+1)&&h<0&&h>-1&&($||e.params.cssMode)&&g>p;if(b||I){const m=(1-Math.abs((Math.abs(h)-.5)/.5))**.5;C+=-28*h*m,u+=-.5*m,L+=96*m,n=`${(c.rotate||e.isHorizontal()?-25:0)*m*Math.abs(h)}%`}if(h<0?t=`calc(${t}px ${f?"-":"+"} (${L*Math.abs(h)}%))`:h>0?t=`calc(${t}px ${f?"-":"+"} (-${L*Math.abs(h)}%))`:t=`${t}px`,!e.isHorizontal()){const m=n;n=t,t=m}const E=h<0?`${1+(1-u)*h}`:`${1-(1-u)*h}`,S=`
        translate3d(${t}, ${n}, ${d}px)
        rotateZ(${c.rotate?f?-C:C:0}deg)
        scale(${E})
      `;if(c.slideShadows){let m=A.querySelector(".swiper-slide-shadow");m||(m=Ce("cards",A)),m&&(m.style.opacity=Math.min(Math.max((Math.abs(h)-.5)/.5,0),1))}A.style.zIndex=-Math.abs(Math.round(x))+s.length;const v=ye(c,A);v.style.transform=S}},setTransition:s=>{const o=e.slides.map(f=>q(f));o.forEach(f=>{f.style.transitionDuration=`${s}ms`,f.querySelectorAll(".swiper-slide-shadow").forEach(c=>{c.style.transitionDuration=`${s}ms`})}),ke({swiper:e,duration:s,transformElements:o})},perspective:()=>!0,overwriteParams:()=>({_loopSwapReset:!1,watchSlidesProgress:!0,loopAdditionalSlides:e.params.cardsEffect.rotate?3:2,centeredSlides:!0,virtualTranslate:!e.params.cssMode})})}function X(e,r){const a=document.getElementById(e);if(!a)return;if(!r||r.length===0){a.innerHTML='<div class="slideshow-empty">Keine Zeichnungen verfügbar</div>';return}const l=r.map(i=>`
    <div class="swiper-slide">
      <img src="/drawings/${encodeURIComponent(i)}" alt="Teilnehmer Zeichnung" loading="lazy">
    </div>
  `).join("");a.innerHTML=`
    <div class="swiper polaroid-swiper">
      <div class="swiper-wrapper">
        ${l}
      </div>
      <div class="swiper-pagination"></div>
    </div>
    <p class="swipe-hint">← wischen →</p>
  `,new ie(a.querySelector(".swiper"),{modules:[Ee,be,he],effect:"cards",grabCursor:!0,pagination:{el:a.querySelector(".swiper-pagination"),type:"fraction"},keyboard:{enabled:!0}})}function W(e,r){const a=document.getElementById(e);if(!a)return;if(!r||r.length===0){a.innerHTML='<div class="text-list-empty">Keine Einträge vorhanden</div>';return}a.innerHTML="",r.forEach((s,o)=>{const f=$e(s,o+1);a.appendChild(f)});const l=a.querySelectorAll(".text-card"),i=new IntersectionObserver(s=>{s.forEach(o=>{o.isIntersecting&&(o.target.classList.add("visible"),i.unobserve(o.target))})},{threshold:.1});l.forEach(s=>i.observe(s))}function $e(e,r){const a=document.createElement("div");a.className="text-card",a.setAttribute("role","article");const l=document.createElement("span");l.textContent=e;const i=l.innerHTML;return a.innerHTML=`
    <div class="text-card-content">„${i}“</div>
    <div class="text-card-author">— Teilnehmer ${r}</div>
  `,a}const Se=["start","teil-a","teil-b","teil-c","teil-d","teil-e"];document.addEventListener("DOMContentLoaded",async()=>{new se(Se),document.body.classList.add("loading-data");try{const e=await oe(),r=e.rawRows;O("teil-a-content",e.teilA),_("teil-b-content",e.teilB,P),_("teil-c-content",e.teilC,H),W("abschiebsbriefe-content",e.abschiebsbriefe),X("slideshow-container",e.zeichnungen),N("teil-a",r,a=>{O("teil-a-content",a.teilA)}),N("teil-b",r,a=>{_("teil-b-content",a.teilB,P)}),N("teil-c",r,a=>{_("teil-c-content",a.teilC,H)})}catch(e){console.error("Failed to load data:",e),O("teil-a-content",[]),_("teil-b-content",[],P),_("teil-c-content",[],H),W("abschiebsbriefe-content",[]),X("slideshow-container",[])}finally{document.body.classList.remove("loading-data")}});function N(e,r,a){const l=document.getElementById(`page-${e}`);if(!l)return;const i=l.querySelectorAll(".filter-btn");i.forEach(s=>{s.addEventListener("click",()=>{i.forEach(f=>f.classList.remove("active")),s.classList.add("active");const o=ce(r,s.dataset.filter);a(o)})})}
