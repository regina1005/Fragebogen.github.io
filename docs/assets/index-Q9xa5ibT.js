import{r as te,g as ae}from"./vendor-Czn-76cG.js";import{g as ne,a as ie,e as G,b as se,c as re,d as w,m as A,s as W,f as le,h as U,i as j,j as oe,S as ce}from"./swiper-5vHbYaTT.js";(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))l(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&l(o)}).observe(document,{childList:!0,subtree:!0});function t(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function l(s){if(s.ep)return;s.ep=!0;const i=t(s);fetch(s.href,i)}})();class de{constructor(n){this.pages=n,this.currentIndex=0,this.isAnimating=!1,this.btnBack=document.getElementById("btn-back"),this.btnNext=document.getElementById("btn-next"),this.btnStart=document.getElementById("btn-start"),this.dotsContainer=document.getElementById("dots"),this.bottomBar=document.getElementById("bottom-bar"),this._initDots(),this._bindEvents(),this._update()}_initDots(){this.dotsContainer.innerHTML="";for(let n=1;n<this.pages.length;n++){const t=document.createElement("span");t.className="dot",this.dotsContainer.appendChild(t)}}_bindEvents(){this.btnBack.addEventListener("click",()=>this.back()),this.btnNext.addEventListener("click",()=>this.next()),this.btnStart&&this.btnStart.addEventListener("click",t=>{t.stopPropagation(),this.next()});const n=document.getElementById(`page-${this.pages[0]}`);n&&n.addEventListener("click",()=>this.next())}next(){this.isAnimating||this.currentIndex>=this.pages.length-1||this._animateTo(this.currentIndex+1,"forward")}back(){this.isAnimating||this.currentIndex<=0||this._animateTo(this.currentIndex-1,"backward")}_animateTo(n,t){this.isAnimating=!0;const l=document.getElementById(`page-${this.pages[this.currentIndex]}`),s=document.getElementById(`page-${this.pages[n]}`),i=300,u=window.matchMedia("(prefers-reduced-motion: reduce)").matches?10:i;s.style.transition="none",s.style.transform=t==="forward"?"translateX(100%)":"translateX(-100%)",s.classList.add("page-active"),s.offsetHeight;const d=`transform ${i}ms cubic-bezier(0.4, 0, 0.2, 1)`;l.style.transition=d,l.style.transform=t==="forward"?"translateX(-100%)":"translateX(100%)",s.style.transition=d,s.style.transform="translateX(0)",this.currentIndex=n,this._update(),setTimeout(()=>{l.classList.remove("page-active"),l.style.transition="",l.style.transform="",s.style.transition="",s.style.transform="",this.isAnimating=!1},u)}_update(){const n=this.currentIndex===0,t=this.currentIndex===this.pages.length-1;this.bottomBar.classList.toggle("hidden",n),this.btnBack.setAttribute("aria-hidden",String(n)),this.btnNext.setAttribute("aria-hidden",String(t)),this.dotsContainer.querySelectorAll(".dot").forEach((s,i)=>{s.classList.toggle("dot-active",i+1===this.currentIndex)})}}var ue=te();const fe=ae(ue);async function ge(e="./data.csv"){try{const n=await fetch(e);if(!n.ok)throw new Error(`Fehler beim Laden der CSV-Datei: HTTP ${n.status}`);const t=await n.text();return new Promise((l,s)=>{fe.parse(t,{header:!0,skipEmptyLines:!0,dynamicTyping:!0,complete:i=>{const o=R(i.data);l(o)},error:i=>{s(i)}})})}catch(n){throw console.error("Error loading CSV:",n),n}}function R(e){return{teilA:X(e,["frage_a1","frage_a2","frage_a3","frage_a4","frage_a5","frage_a6","frage_a7"],{min:1,max:5}),teilB:N(e,["frage_b1","frage_b2","frage_b3","frage_b4","frage_b5","frage_b6","frage_b7","frage_b8","frage_b9"]),teilC:N(e,["frage_c1","frage_c2","frage_c4","frage_c5","frage_c6","frage_c7"]),faltstrategieTexte:e.map(n=>({text:String(n.frage_c3||"").replace(/^[„""]|["""]$/g,"").trim(),zugehoerigkeit:n.zugehoerigkeit,faltStrategie:n.frage_c2})).filter(n=>n.text),abschiebsbriefe:e.map(n=>({text:n.abschiedsbrief,zugehoerigkeit:n.zugehoerigkeit})).filter(n=>n.text),zeichnungen:e.map(n=>n.zeichnung_datei).filter(Boolean),teilD3:e.map(n=>({value:n.frage_d3,zugehoerigkeit:n.zugehoerigkeit})).filter(n=>n.value!==null&&n.value!==void 0&&n.value!==""),teilE:{singleChoice:N(e,["frage_e1","frage_e2","frage_e3"]),likert3:X(e,["frage_e4_1","frage_e4_2","frage_e4_3"],{min:0,max:2})},teilnehmerAnzahl:e.length,rawRows:e}}function he(e,n){if(!e)return R([]);const t=n==="alle"?e:e.filter(l=>(l.zugehoerigkeit||"").toLowerCase()===n.toLowerCase());return R(t)}function X(e,n,{min:t=1,max:l=5}={}){return n.map(s=>{const i=e.map(c=>c[s]).filter(c=>c!=null&&c!==""&&Number.isFinite(Number(c))&&Number(c)>=t&&Number(c)<=l);if(i.length===0)return{median:null,mean:null};const o=i.map(Number),u=o.reduce((c,m)=>c+m,0)/o.length,d=[...o].sort((c,m)=>c-m),g=Math.floor(d.length/2),v=d.length%2===0?(d[g-1]+d[g])/2:d[g];return{median:Number(v.toFixed(2)),mean:Number(u.toFixed(2))}})}function N(e,n){return n.map(t=>{const l={};let s=0;return e.forEach(i=>{const o=i[t];o!=null&&o!==""&&(l[o]=(l[o]||0)+1,s++)}),Object.entries(l).map(([i,o])=>({option:String(i),count:o,percentage:Number((o/s*100).toFixed(1))})).sort((i,o)=>o.count-i.count)})}const me=["Ich empfinde eine tiefe Loyalität gegenüber zusammengehörigen Socken.","Der Verlust einer Socke beeinflusst meine emotionale Grundstimmung messbar.","Ich habe schon einmal aktiv nach einer einzelnen Socke gesucht, obwohl die Wahrscheinlichkeit gering war.","Gemusterte Socken vermitteln mir mehr Identitätsstabilität als einfarbige.","Ich glaube, dass Socken im Wäschekorb soziale Bindungen eingehen.","Zwei unterschiedliche Socken zu tragen fühlt sich rebellisch-autonom an.","Das Wegwerfen einer Einzelsocke ist ein Akt innerer Reife."],pe=["Durch die Bearbeitung dieses Fragebogens hat sich meine Perspektive auf meine Beziehung zu Socken verändert.","Ich nehme aktuell eine erhöhte Bewusstheit hinsichtlich textiler Mikroentscheidungen wahr.","Ich gehe davon aus, dass die Auseinandersetzung mit textiler Bindungsdynamik mein zukünftiges Sockenauswahlverhalten beeinflussen wird."],be=["nie","selten","manchmal","oft","immer"];function Q(e,n,t){return e==null?"50%":`${(e-n)/(t-n)*100}%`}function ve(e,n,t,l,s){const{scaleMin:i,scaleMax:o,scaleLabels:u,prefix:d}=s,g=document.createElement("div");g.className="visualization-card",g.setAttribute("aria-label",`Frage ${d}${l+1}: ${e}`);const v=n!==null&&t!==null,c=v?Number(n).toFixed(1):"–",m=v?Number(t).toFixed(1):"–",L=v&&Math.abs(n-t)<.4,x=L?"top: 28px;":"",b=L?"position: absolute; top: 14px; transform: none;":"",T=Q(n,i,o),a=Q(t,i,o),r=v?`
    <div class="likert-marker median" style="left: ${T}">
      <span class="likert-marker-label" aria-hidden="true">${c}</span>
      <div class="likert-marker-dot" title="Median: ${c}"></div>
    </div>
    <div class="likert-marker mean" style="left: ${a}; ${x}">
      <span class="likert-marker-label" style="${b}" aria-hidden="true">${m}</span>
      <div class="likert-marker-dot" title="Durchschnitt: ${m}"></div>
    </div>
  `:'<div class="likert-no-data">Daten werden noch erhoben</div>';return g.innerHTML=`
    <div class="visualization-card-index">${d}${l+1}</div>
    <div class="visualization-title">${e}</div>
    <div class="likert-scale" role="img" aria-label="Likert-Skala: Median ${c}, Durchschnitt ${m}">
      <div class="likert-track">
        <div class="likert-ticks">
          ${u.map(()=>'<div class="likert-tick"></div>').join("")}
        </div>
        <div class="likert-markers">
          ${r}
        </div>
      </div>
      <div class="likert-labels" aria-hidden="true">
        ${u.map(f=>`<span>${f}</span>`).join("")}
      </div>
    </div>
    <div class="likert-legend" aria-hidden="true">
      <div class="likert-legend-item">
        <div class="likert-legend-dot median"></div>
        <span>Median: ${c}</span>
      </div>
      <div class="likert-legend-item">
        <div class="likert-legend-dot mean"></div>
        <span>Durchschnitt: ${m}</span>
      </div>
    </div>
  `,g}function ke(e){const n=new IntersectionObserver(t=>{t.forEach(l=>{l.isIntersecting&&(l.target.classList.add("visible"),n.unobserve(l.target))})},{threshold:.12,rootMargin:"0px 0px -40px 0px"});e.forEach(t=>n.observe(t))}function D(e,n,t={}){const{questions:l=me,scaleMin:s=1,scaleMax:i=5,scaleLabels:o=be,prefix:u="A"}=t,d=document.getElementById(e);if(!d)return;d.innerHTML="";const g=Array.isArray(n)&&n.length>0;l.forEach((c,m)=>{const L=g&&n[m]?n[m]:{median:null,mean:null},x=ve(c,L.median,L.mean,m,{scaleMin:s,scaleMax:i,scaleLabels:o,prefix:u});d.appendChild(x)});const v=d.querySelectorAll(".visualization-card");ke(v)}const H=[{title:"In einem Szenario textiler Destabilisierung bevorzuge ich:",options:["Erhalt beider, jedoch perforierter Socken","Vollständige Eliminierung einer einzelnen Socke"]},{title:"Ich priorisiere bei textiler Auswahl:",options:["Maximale visuelle Kongruenz","Maximale individualistische Divergenz"]},{title:"Im Kontext langfristiger Nutzung bewerte ich als bedeutsamer:",options:["Strukturelle Haltbarkeit","Ästhetische Musterkomplexität"]},{title:"Bei drohendem Sockenschwund neige ich eher zu:",options:["Aktiver Suchinitiative","Akzeptanzbasierter Verlustverarbeitung"]},{title:"In Bezug auf textile Paarbildung empfinde ich als zentraler:",options:["Symmetrische Gleichwertigkeit","Funktionale Ergänzung"]},{title:"Bei geringfügiger Asymmetrie reagiere ich überwiegend mit:",options:["Kognitiver Dissonanz","Flexibler Integrationsbereitschaft"]},{title:"Im Falle chronischer Einzelsocken-Situation tendiere ich zu:",options:["Persistierender Hoffnung","Adaptiver Neubildung"]},{title:"Innerhalb der Sockenschublade erachte ich als stabilisierender:",options:["Klare kategoriale Ordnung","Emergente Koexistenz"]},{title:"Bei erhöhtem Stressniveau greife ich überwiegend auf:",options:["Vertrautes Sockenduo","Funktional austauschbare Einheiten"]}],F=[{title:"Welche Sockenlänge präferieren Sie überwiegend im Alltag?",options:["Keine Socken","No-Show-/Invisible-Socken","Knöchellänge","Mittlere Länge (Crew)","Knielang oder darüber","Situationsabhängige Variation"]},{title:"Welche Falt- bzw. Lagerungsstrategie wenden Sie überwiegend an?",options:["Dyadische Überlappungsfaltung","Kompressionsbasierte Bündelung","Lineare Parallelfaltung","Unstrukturierte Ablage"]},{title:"Welche Farbkategorie präferieren Sie bei der Auswahl tragender Socken?",options:["Achromatische Töne","Gedämpfte Chromatik","Helle/kontrastreiche Farben","Situationsabhängige Farbwahl"]},{title:"Wie würden Sie Ihre textile Oberflächenpräferenz beschreiben?",options:["Überwiegend unifarbene Socken","Gelegentlich gemusterte Socken","Überwiegend gemusterte Socken","Muster als primäres Identitätsmerkmal"]},{title:"Inwiefern beobachten Sie eine Veränderung Ihrer affektiven Grundstimmung beim Tragen gemusterter Socken?",options:["Subjektiv wahrnehmbare Stimmungsaufhellung","Erhöhte Selbstwirksamkeits- oder Expressivitätserfahrung","Keine relevante affektive Veränderung","Keine Angabe / Trage keine gemusterten Socken"]},{title:"Inwiefern reagieren Sie auf eine unerwartete Veränderung Ihrer Sockenschubladen- oder Lagerungsstruktur?",options:["Keine subjektiv relevante Reaktion","Kurzfristige Irritation ohne Handlungsimpuls","Wahrnehmbarer Ordnungsimpuls mit Bedürfnis nach Wiederherstellung","Deutliche kognitive oder affektive Dysregulation bis zur unmittelbaren Reorganisation"]}],K=[{title:"Wie beschreiben Sie Ihre aktuelle Gesamtbefindlichkeit?",options:["Unverändert gegenüber dem Ausgangszustand","Leicht positiv aktiviert","Deutlich positiv aktiviert","Leicht irritiert","Deutlich irritiert","Schwer operationalisierbar"]},{title:"Falls Sie eine Veränderung wahrnehmen: Wo im Körper spüren Sie diese primär?",options:["Kopfbereich","Brust-/Herzregion","Bauch-/Abdominalregion","Extremitäten","Keine spezifische Lokalisierung"]},{title:"Hat die Bearbeitung des Fragebogens zu allgemeinen Reflexionen über Ordnung, Verlust oder Paarbildung geführt?",options:["Nein","In geringem Ausmaß","Moderat","Deutlich","In überraschend tiefgreifender Weise"]}];function _(e,n,t){const l=document.getElementById(e);if(!l)return;l.innerHTML="",n.forEach((o,u)=>{if(!o||o.length===0)return;const d=t[u];if(!d)return;const g=ye(d.title,o,d.options);l.appendChild(g)});const s=l.querySelectorAll(".visualization-card"),i=new IntersectionObserver(o=>{o.forEach(u=>{u.isIntersecting&&(u.target.classList.add("visible"),u.target.querySelectorAll(".bar-fill").forEach(d=>{d.classList.add("animate")}),i.unobserve(u.target))})},{threshold:.2});s.forEach(o=>i.observe(o))}function ye(e,n,t){const l=document.createElement("div");l.className="visualization-card",l.setAttribute("role","region"),l.setAttribute("aria-label",e);const s=n.map(i=>{const o=parseInt(i.option,10),u=t[o]!==void 0?t[o]:`Option ${i.option}`,d=Number(i.percentage).toFixed(1),g=i.percentage>=15;return`
      <div class="bar-chart-item">
        <div class="bar-label">${u}</div>
        <div class="bar-container">
          <div class="bar-fill" style="--bar-width: ${d}%" title="${d} %">
            ${g?`<span class="bar-percentage">${d} %</span>`:""}
          </div>
        </div>
        ${g?"":`<span class="bar-percentage-outside">${d} %</span>`}
      </div>
    `}).join("");return l.innerHTML=`
    <div class="visualization-title">${e}</div>
    <div class="bar-chart">
      ${s}
    </div>
  `,l}function Ee({swiper:e,extendParams:n,on:t,emit:l}){const s=ne(),i=ie();e.keyboard={enabled:!1},n({keyboard:{enabled:!1,onlyInViewport:!0,pageUpDown:!0,speed:void 0}});function o(g){if(!e.enabled)return;const{rtlTranslate:v}=e;let c=g;c.originalEvent&&(c=c.originalEvent);const m=c.keyCode||c.charCode,L=e.params.keyboard.pageUpDown,x=L&&m===33,b=L&&m===34,T=m===37,a=m===39,r=m===38,f=m===40;if(!e.allowSlideNext&&(e.isHorizontal()&&a||e.isVertical()&&f||b)||!e.allowSlidePrev&&(e.isHorizontal()&&T||e.isVertical()&&r||x))return!1;if(c.shiftKey||c.altKey||c.ctrlKey||c.metaKey||s.activeElement&&(s.activeElement.isContentEditable||s.activeElement.nodeName&&(s.activeElement.nodeName.toLowerCase()==="input"||s.activeElement.nodeName.toLowerCase()==="textarea")))return;if(e.params.keyboard.onlyInViewport&&(x||b||T||a||r||f)){let S=!1;if(G(e.el,`.${e.params.slideClass}, swiper-slide`).length>0&&G(e.el,`.${e.params.slideActiveClass}`).length===0)return;const I=e.el,M=I.clientWidth,k=I.clientHeight,z=i.innerWidth,C=i.innerHeight,$=se(I);v&&($.left-=I.scrollLeft);const y=[[$.left,$.top],[$.left+M,$.top],[$.left,$.top+k],[$.left+M,$.top+k]];for(let p=0;p<y.length;p+=1){const E=y[p];if(E[0]>=0&&E[0]<=z&&E[1]>=0&&E[1]<=C){if(E[0]===0&&E[1]===0)continue;S=!0}}if(!S)return}const h=e.params.keyboard.speed;e.isHorizontal()?((x||b||T||a)&&(c.preventDefault?c.preventDefault():c.returnValue=!1),((b||a)&&!v||(x||T)&&v)&&e.slideNext(h),((x||T)&&!v||(b||a)&&v)&&e.slidePrev(h)):((x||b||r||f)&&(c.preventDefault?c.preventDefault():c.returnValue=!1),(b||f)&&e.slideNext(h),(x||r)&&e.slidePrev(h)),l("keyPress",m)}function u(){e.keyboard.enabled||(s.addEventListener("keydown",o),e.keyboard.enabled=!0)}function d(){e.keyboard.enabled&&(s.removeEventListener("keydown",o),e.keyboard.enabled=!1)}t("init",()=>{e.params.keyboard.enabled&&u()}),t("destroy",()=>{e.keyboard.enabled&&d()}),Object.assign(e.keyboard,{enable:u,disable:d})}function Se(e,n,t,l){return e.params.createElements&&Object.keys(l).forEach(s=>{if(!t[s]&&t.auto===!0){let i=re(e.el,`.${l[s]}`)[0];i||(i=w("div",l[s]),i.className=l[s],e.el.append(i)),t[s]=i,n[s]=i}}),t}function P(e=""){return`.${e.trim().replace(/([\.:!+\/()[\]#>~*^$|=,'"@{}\\])/g,"\\$1").replace(/ /g,".")}`}function Le({swiper:e,extendParams:n,on:t,emit:l}){const s="swiper-pagination";n({pagination:{el:null,bulletElement:"span",clickable:!1,hideOnClick:!1,renderBullet:null,renderProgressbar:null,renderFraction:null,renderCustom:null,progressbarOpposite:!1,type:"bullets",dynamicBullets:!1,dynamicMainBullets:1,formatFractionCurrent:a=>a,formatFractionTotal:a=>a,bulletClass:`${s}-bullet`,bulletActiveClass:`${s}-bullet-active`,modifierClass:`${s}-`,currentClass:`${s}-current`,totalClass:`${s}-total`,hiddenClass:`${s}-hidden`,progressbarFillClass:`${s}-progressbar-fill`,progressbarOppositeClass:`${s}-progressbar-opposite`,clickableClass:`${s}-clickable`,lockClass:`${s}-lock`,horizontalClass:`${s}-horizontal`,verticalClass:`${s}-vertical`,paginationDisabledClass:`${s}-disabled`}}),e.pagination={el:null,bullets:[]};let i,o=0;function u(){return!e.params.pagination.el||!e.pagination.el||Array.isArray(e.pagination.el)&&e.pagination.el.length===0}function d(a,r){const{bulletActiveClass:f}=e.params.pagination;a&&(a=a[`${r==="prev"?"previous":"next"}ElementSibling`],a&&(a.classList.add(`${f}-${r}`),a=a[`${r==="prev"?"previous":"next"}ElementSibling`],a&&a.classList.add(`${f}-${r}-${r}`)))}function g(a,r,f){if(a=a%f,r=r%f,r===a+1)return"next";if(r===a-1)return"previous"}function v(a){const r=a.target.closest(P(e.params.pagination.bulletClass));if(!r)return;a.preventDefault();const f=U(r)*e.params.slidesPerGroup;if(e.params.loop){if(e.realIndex===f)return;const h=g(e.realIndex,f,e.slides.length);h==="next"?e.slideNext():h==="previous"?e.slidePrev():e.slideToLoop(f)}else e.slideTo(f)}function c(){const a=e.rtl,r=e.params.pagination;if(u())return;let f=e.pagination.el;f=A(f);let h,S;const I=e.virtual&&e.params.virtual.enabled?e.virtual.slides.length:e.slides.length,M=e.params.loop?Math.ceil(I/e.params.slidesPerGroup):e.snapGrid.length;if(e.params.loop?(S=e.previousRealIndex||0,h=e.params.slidesPerGroup>1?Math.floor(e.realIndex/e.params.slidesPerGroup):e.realIndex):typeof e.snapIndex<"u"?(h=e.snapIndex,S=e.previousSnapIndex):(S=e.previousIndex||0,h=e.activeIndex||0),r.type==="bullets"&&e.pagination.bullets&&e.pagination.bullets.length>0){const k=e.pagination.bullets;let z,C,$;if(r.dynamicBullets&&(i=le(k[0],e.isHorizontal()?"width":"height"),f.forEach(y=>{y.style[e.isHorizontal()?"width":"height"]=`${i*(r.dynamicMainBullets+4)}px`}),r.dynamicMainBullets>1&&S!==void 0&&(o+=h-(S||0),o>r.dynamicMainBullets-1?o=r.dynamicMainBullets-1:o<0&&(o=0)),z=Math.max(h-o,0),C=z+(Math.min(k.length,r.dynamicMainBullets)-1),$=(C+z)/2),k.forEach(y=>{const p=[...["","-next","-next-next","-prev","-prev-prev","-main"].map(E=>`${r.bulletActiveClass}${E}`)].map(E=>typeof E=="string"&&E.includes(" ")?E.split(" "):E).flat();y.classList.remove(...p)}),f.length>1)k.forEach(y=>{const p=U(y);p===h?y.classList.add(...r.bulletActiveClass.split(" ")):e.isElement&&y.setAttribute("part","bullet"),r.dynamicBullets&&(p>=z&&p<=C&&y.classList.add(...`${r.bulletActiveClass}-main`.split(" ")),p===z&&d(y,"prev"),p===C&&d(y,"next"))});else{const y=k[h];if(y&&y.classList.add(...r.bulletActiveClass.split(" ")),e.isElement&&k.forEach((p,E)=>{p.setAttribute("part",E===h?"bullet-active":"bullet")}),r.dynamicBullets){const p=k[z],E=k[C];for(let B=z;B<=C;B+=1)k[B]&&k[B].classList.add(...`${r.bulletActiveClass}-main`.split(" "));d(p,"prev"),d(E,"next")}}if(r.dynamicBullets){const y=Math.min(k.length,r.dynamicMainBullets+4),p=(i*y-i)/2-$*i,E=a?"right":"left";k.forEach(B=>{B.style[e.isHorizontal()?E:"top"]=`${p}px`})}}f.forEach((k,z)=>{if(r.type==="fraction"&&(k.querySelectorAll(P(r.currentClass)).forEach(C=>{C.textContent=r.formatFractionCurrent(h+1)}),k.querySelectorAll(P(r.totalClass)).forEach(C=>{C.textContent=r.formatFractionTotal(M)})),r.type==="progressbar"){let C;r.progressbarOpposite?C=e.isHorizontal()?"vertical":"horizontal":C=e.isHorizontal()?"horizontal":"vertical";const $=(h+1)/M;let y=1,p=1;C==="horizontal"?y=$:p=$,k.querySelectorAll(P(r.progressbarFillClass)).forEach(E=>{E.style.transform=`translate3d(0,0,0) scaleX(${y}) scaleY(${p})`,E.style.transitionDuration=`${e.params.speed}ms`})}r.type==="custom"&&r.renderCustom?(W(k,r.renderCustom(e,h+1,M)),z===0&&l("paginationRender",k)):(z===0&&l("paginationRender",k),l("paginationUpdate",k)),e.params.watchOverflow&&e.enabled&&k.classList[e.isLocked?"add":"remove"](r.lockClass)})}function m(){const a=e.params.pagination;if(u())return;const r=e.virtual&&e.params.virtual.enabled?e.virtual.slides.length:e.grid&&e.params.grid.rows>1?e.slides.length/Math.ceil(e.params.grid.rows):e.slides.length;let f=e.pagination.el;f=A(f);let h="";if(a.type==="bullets"){let S=e.params.loop?Math.ceil(r/e.params.slidesPerGroup):e.snapGrid.length;e.params.freeMode&&e.params.freeMode.enabled&&S>r&&(S=r);for(let I=0;I<S;I+=1)a.renderBullet?h+=a.renderBullet.call(e,I,a.bulletClass):h+=`<${a.bulletElement} ${e.isElement?'part="bullet"':""} class="${a.bulletClass}"></${a.bulletElement}>`}a.type==="fraction"&&(a.renderFraction?h=a.renderFraction.call(e,a.currentClass,a.totalClass):h=`<span class="${a.currentClass}"></span> / <span class="${a.totalClass}"></span>`),a.type==="progressbar"&&(a.renderProgressbar?h=a.renderProgressbar.call(e,a.progressbarFillClass):h=`<span class="${a.progressbarFillClass}"></span>`),e.pagination.bullets=[],f.forEach(S=>{a.type!=="custom"&&W(S,h||""),a.type==="bullets"&&e.pagination.bullets.push(...S.querySelectorAll(P(a.bulletClass)))}),a.type!=="custom"&&l("paginationRender",f[0])}function L(){e.params.pagination=Se(e,e.originalParams.pagination,e.params.pagination,{el:"swiper-pagination"});const a=e.params.pagination;if(!a.el)return;let r;typeof a.el=="string"&&e.isElement&&(r=e.el.querySelector(a.el)),!r&&typeof a.el=="string"&&(r=[...document.querySelectorAll(a.el)]),r||(r=a.el),!(!r||r.length===0)&&(e.params.uniqueNavElements&&typeof a.el=="string"&&Array.isArray(r)&&r.length>1&&(r=[...e.el.querySelectorAll(a.el)],r.length>1&&(r=r.find(f=>G(f,".swiper")[0]===e.el))),Array.isArray(r)&&r.length===1&&(r=r[0]),Object.assign(e.pagination,{el:r}),r=A(r),r.forEach(f=>{a.type==="bullets"&&a.clickable&&f.classList.add(...(a.clickableClass||"").split(" ")),f.classList.add(a.modifierClass+a.type),f.classList.add(e.isHorizontal()?a.horizontalClass:a.verticalClass),a.type==="bullets"&&a.dynamicBullets&&(f.classList.add(`${a.modifierClass}${a.type}-dynamic`),o=0,a.dynamicMainBullets<1&&(a.dynamicMainBullets=1)),a.type==="progressbar"&&a.progressbarOpposite&&f.classList.add(a.progressbarOppositeClass),a.clickable&&f.addEventListener("click",v),e.enabled||f.classList.add(a.lockClass)}))}function x(){const a=e.params.pagination;if(u())return;let r=e.pagination.el;r&&(r=A(r),r.forEach(f=>{f.classList.remove(a.hiddenClass),f.classList.remove(a.modifierClass+a.type),f.classList.remove(e.isHorizontal()?a.horizontalClass:a.verticalClass),a.clickable&&(f.classList.remove(...(a.clickableClass||"").split(" ")),f.removeEventListener("click",v))})),e.pagination.bullets&&e.pagination.bullets.forEach(f=>f.classList.remove(...a.bulletActiveClass.split(" ")))}t("changeDirection",()=>{if(!e.pagination||!e.pagination.el)return;const a=e.params.pagination;let{el:r}=e.pagination;r=A(r),r.forEach(f=>{f.classList.remove(a.horizontalClass,a.verticalClass),f.classList.add(e.isHorizontal()?a.horizontalClass:a.verticalClass)})}),t("init",()=>{e.params.pagination.enabled===!1?T():(L(),m(),c())}),t("activeIndexChange",()=>{typeof e.snapIndex>"u"&&c()}),t("snapIndexChange",()=>{c()}),t("snapGridLengthChange",()=>{m(),c()}),t("destroy",()=>{x()}),t("enable disable",()=>{let{el:a}=e.pagination;a&&(a=A(a),a.forEach(r=>r.classList[e.enabled?"remove":"add"](e.params.pagination.lockClass)))}),t("lock unlock",()=>{c()}),t("click",(a,r)=>{const f=r.target,h=A(e.pagination.el);if(e.params.pagination.el&&e.params.pagination.hideOnClick&&h&&h.length>0&&!f.classList.contains(e.params.pagination.bulletClass)){if(e.navigation&&(e.navigation.nextEl&&f===e.navigation.nextEl||e.navigation.prevEl&&f===e.navigation.prevEl))return;const S=h[0].classList.contains(e.params.pagination.hiddenClass);l(S===!0?"paginationShow":"paginationHide"),h.forEach(I=>I.classList.toggle(e.params.pagination.hiddenClass))}});const b=()=>{e.el.classList.remove(e.params.pagination.paginationDisabledClass);let{el:a}=e.pagination;a&&(a=A(a),a.forEach(r=>r.classList.remove(e.params.pagination.paginationDisabledClass))),L(),m(),c()},T=()=>{e.el.classList.add(e.params.pagination.paginationDisabledClass);let{el:a}=e.pagination;a&&(a=A(a),a.forEach(r=>r.classList.add(e.params.pagination.paginationDisabledClass))),x()};Object.assign(e.pagination,{enable:b,disable:T,render:m,update:c,init:L,destroy:x})}function xe(e){const{effect:n,swiper:t,on:l,setTranslate:s,setTransition:i,overwriteParams:o,perspective:u,recreateShadows:d,getEffectParams:g}=e;l("beforeInit",()=>{if(t.params.effect!==n)return;t.classNames.push(`${t.params.containerModifierClass}${n}`),u&&u()&&t.classNames.push(`${t.params.containerModifierClass}3d`);const c=o?o():{};Object.assign(t.params,c),Object.assign(t.originalParams,c)}),l("setTranslate _virtualUpdated",()=>{t.params.effect===n&&s()}),l("setTransition",(c,m)=>{t.params.effect===n&&i(m)}),l("transitionEnd",()=>{if(t.params.effect===n&&d){if(!g||!g().slideShadows)return;t.slides.forEach(c=>{c.querySelectorAll(".swiper-slide-shadow-top, .swiper-slide-shadow-right, .swiper-slide-shadow-bottom, .swiper-slide-shadow-left").forEach(m=>m.remove())}),d()}});let v;l("virtualUpdate",()=>{t.params.effect===n&&(t.slides.length||(v=!0),requestAnimationFrame(()=>{v&&t.slides&&t.slides.length&&(s(),v=!1)}))})}function Ce(e,n){const t=j(n);return t!==n&&(t.style.backfaceVisibility="hidden",t.style["-webkit-backface-visibility"]="hidden"),t}function $e({swiper:e,duration:n,transformElements:t,allSlides:l}){const{activeIndex:s}=e,i=o=>o.parentElement?o.parentElement:e.slides.find(d=>d.shadowRoot&&d.shadowRoot===o.parentNode);if(e.params.virtualTranslate&&n!==0){let o=!1,u;l?u=t:u=t.filter(d=>{const g=d.classList.contains("swiper-slide-transform")?i(d):d;return e.getSlideIndex(g)===s}),u.forEach(d=>{oe(d,()=>{if(o||!e||e.destroyed)return;o=!0,e.animating=!1;const g=new window.CustomEvent("transitionend",{bubbles:!0,cancelable:!0});e.wrapperEl.dispatchEvent(g)})})}}function Ie(e,n,t){const l=`swiper-slide-shadow${` swiper-slide-shadow-${e}`}`,s=j(n);let i=s.querySelector(`.${l.split(" ").join(".")}`);return i||(i=w("div",l.split(" ")),s.append(i)),i}function Te({swiper:e,extendParams:n,on:t}){n({cardsEffect:{slideShadows:!0,rotate:!0,perSlideRotate:2,perSlideOffset:8}}),xe({effect:"cards",swiper:e,on:t,setTranslate:()=>{const{slides:i,activeIndex:o,rtlTranslate:u}=e,d=e.params.cardsEffect,{startTranslate:g,isTouched:v}=e.touchEventsData,c=u?-e.translate:e.translate;for(let m=0;m<i.length;m+=1){const L=i[m],x=L.progress,b=Math.min(Math.max(x,-4),4);let T=L.swiperSlideOffset;e.params.centeredSlides&&!e.params.cssMode&&(e.wrapperEl.style.transform=`translateX(${e.minTranslate()}px)`),e.params.centeredSlides&&e.params.cssMode&&(T-=i[0].swiperSlideOffset);let a=e.params.cssMode?-T-e.translate:-T,r=0;const f=-100*Math.abs(b);let h=1,S=-d.perSlideRotate*b,I=d.perSlideOffset-Math.abs(b)*.75;const M=e.virtual&&e.params.virtual.enabled?e.virtual.from+m:m,k=(M===o||M===o-1)&&b>0&&b<1&&(v||e.params.cssMode)&&c<g,z=(M===o||M===o+1)&&b<0&&b>-1&&(v||e.params.cssMode)&&c>g;if(k||z){const p=(1-Math.abs((Math.abs(b)-.5)/.5))**.5;S+=-28*b*p,h+=-.5*p,I+=96*p,r=`${(d.rotate||e.isHorizontal()?-25:0)*p*Math.abs(b)}%`}if(b<0?a=`calc(${a}px ${u?"-":"+"} (${I*Math.abs(b)}%))`:b>0?a=`calc(${a}px ${u?"-":"+"} (-${I*Math.abs(b)}%))`:a=`${a}px`,!e.isHorizontal()){const p=r;r=a,a=p}const C=b<0?`${1+(1-h)*b}`:`${1-(1-h)*b}`,$=`
        translate3d(${a}, ${r}, ${f}px)
        rotateZ(${d.rotate?u?-S:S:0}deg)
        scale(${C})
      `;if(d.slideShadows){let p=L.querySelector(".swiper-slide-shadow");p||(p=Ie("cards",L)),p&&(p.style.opacity=Math.min(Math.max((Math.abs(b)-.5)/.5,0),1))}L.style.zIndex=-Math.abs(Math.round(x))+i.length;const y=Ce(d,L);y.style.transform=$}},setTransition:i=>{const o=e.slides.map(u=>j(u));o.forEach(u=>{u.style.transitionDuration=`${i}ms`,u.querySelectorAll(".swiper-slide-shadow").forEach(d=>{d.style.transitionDuration=`${i}ms`})}),$e({swiper:e,duration:i,transformElements:o})},perspective:()=>!0,overwriteParams:()=>({_loopSwapReset:!1,watchSlidesProgress:!0,loopAdditionalSlides:e.params.cardsEffect.rotate?3:2,centeredSlides:!0,virtualTranslate:!e.params.cssMode})})}function Z(e,n){const t=document.getElementById(e);if(!t)return;if(!n||n.length===0){t.innerHTML='<div class="slideshow-empty">Keine Zeichnungen verfügbar</div>';return}const l=n.map(s=>`
    <div class="swiper-slide">
      <img src="./drawings/${encodeURIComponent(s)}" alt="Teilnehmer Zeichnung" loading="lazy">
    </div>
  `).join("");t.innerHTML=`
    <div class="swiper polaroid-swiper">
      <div class="swiper-wrapper">
        ${l}
      </div>
      <div class="swiper-pagination"></div>
    </div>
    <p class="swipe-hint">← wischen →</p>
  `,new ce(t.querySelector(".swiper"),{modules:[Te,Le,Ee],effect:"cards",grabCursor:!0,pagination:{el:t.querySelector(".swiper-pagination"),type:"fraction"},keyboard:{enabled:!0}})}const ze=["Dyadische Überlappungsfaltung","Kompressionsbasierte Bündelung","Lineare Parallelfaltung","Unstrukturierte Ablage"];function q(e,n){const t=document.getElementById(e);if(!t)return;if(t.innerHTML="",!n||n.length===0){t.innerHTML='<div class="text-list-empty">Keine Einträge vorhanden</div>';return}const l={};n.forEach(o=>{const u=o.faltStrategie!==null&&o.faltStrategie!==void 0?String(o.faltStrategie):"unknown";l[u]||(l[u]=[]),l[u].push(o)}),ze.forEach((o,u)=>{const d=l[String(u)];if(!d||d.length===0)return;const g=document.createElement("div");g.className="faltstrategie-group",g.innerHTML=`
      <div class="faltstrategie-group-header">
        <span class="faltstrategie-group-badge">${u+1}</span>
        <span class="faltstrategie-group-name">${o}</span>
      </div>
      <div class="faltstrategie-group-cards"></div>
    `;const v=g.querySelector(".faltstrategie-group-cards");d.forEach(c=>v.appendChild(ee(c.text,c.zugehoerigkeit))),t.appendChild(g)});const s=t.querySelectorAll(".text-card"),i=new IntersectionObserver(o=>{o.forEach(u=>{u.isIntersecting&&(u.target.classList.add("visible"),i.unobserve(u.target))})},{threshold:.1});s.forEach(o=>i.observe(o))}function Y(e,n){const t=document.getElementById(e);if(!t)return;if(!n||n.length===0){t.innerHTML='<div class="text-list-empty">Keine Einträge vorhanden</div>';return}t.innerHTML="",n.forEach(i=>{const o=typeof i=="string"?i:i.text,u=typeof i=="string"?null:i.zugehoerigkeit,d=ee(o,u);t.appendChild(d)});const l=t.querySelectorAll(".text-card"),s=new IntersectionObserver(i=>{i.forEach(o=>{o.isIntersecting&&(o.target.classList.add("visible"),s.unobserve(o.target))})},{threshold:.1});l.forEach(i=>s.observe(i))}function ee(e,n){const t=document.createElement("div");t.className="text-card",t.setAttribute("role","article");const l=document.createElement("span");l.textContent=e;const s=l.innerHTML;let i;const o=(n||"").toLowerCase();return o==="personal"?i="Therapeutisches Teammitglied":o==="patienten"?i="Patient":i="Teilnehmer",t.innerHTML=`
    <div class="text-card-content">„${s}"</div>
    <div class="text-card-author">— ${i}</div>
  `,t}function Me(e,n=5){const t=[...e].sort((s,i)=>s.pct-i.pct);let l=0;for(;l<t.length;){let s=l;for(;s<t.length-1&&t[s+1].pct-t[l].pct<n;)s++;for(let i=0;i<s-l+1;i++)t[l+i].yLevel=i;l=s+1}return t}function J(e,n){const t=document.getElementById(e);if(!t)return;t.innerHTML="";const l=document.createElement("div");if(l.className="visualization-card",!(Array.isArray(n)&&n.length>0))l.innerHTML=`
      <div class="visualization-card-index">D3</div>
      <div class="visualization-title">Wie stark identifizieren Sie sich mit Ihrem präferierten Sockenpaar?</div>
      <div class="group-scale-wrapper">
        <div class="group-dots-container">
          <div class="likert-no-data">Daten werden noch erhoben</div>
        </div>
        <div class="group-scale-line"></div>
        <div class="likert-labels" aria-hidden="true">
          <span>gar nicht</span>
          <span>vollständig</span>
        </div>
      </div>
    `;else{const o=n.filter(c=>c.value!==null&&c.value!==void 0&&c.value!=="").map(c=>({pct:Math.min(100,Math.max(0,Number(c.value))),isPersonal:(c.zugehoerigkeit||"").toLowerCase()==="personal"})),u=Me(o),d=0,g=18,v=u.map(c=>`
      <div class="group-dot ${c.isPersonal?"personal":"patienten"}"
           style="left: ${c.pct.toFixed(1)}%; bottom: ${d+c.yLevel*g}px;"
           title="${c.isPersonal?"Therapeutisches Team":"Patient"}">
      </div>
    `).join("");l.innerHTML=`
      <div class="visualization-card-index">D3</div>
      <div class="visualization-title">Wie stark identifizieren Sie sich mit Ihrem präferierten Sockenpaar?</div>
      <div class="group-scale-wrapper">
        <div class="group-dots-container">
          ${v}
        </div>
        <div class="group-scale-line"></div>
        <div class="likert-labels" aria-hidden="true">
          <span>gar nicht</span>
          <span>vollständig</span>
        </div>
      </div>
      <div class="likert-legend" aria-hidden="true">
        <div class="likert-legend-item">
          <div class="group-dot-legend patienten"></div>
          <span>Patient</span>
        </div>
        <div class="likert-legend-item">
          <div class="group-dot-legend personal"></div>
          <span>Therapeutisches Team</span>
        </div>
      </div>
    `}t.appendChild(l);const i=new IntersectionObserver(o=>{o.forEach(u=>{u.isIntersecting&&(u.target.classList.add("visible"),i.unobserve(u.target))})},{threshold:.12});i.observe(l)}const Ae=["start","teil-a","teil-b","teil-c","teil-d","teil-e","danke"],V={questions:pe,scaleMin:0,scaleMax:2,scaleLabels:["Trifft nicht zu","neutral","Trifft zu"],prefix:"E4."};document.addEventListener("DOMContentLoaded",async()=>{new de(Ae),document.body.classList.add("loading-data");try{const e=await ge(),n=e.rawRows;D("teil-a-content",e.teilA),_("teil-b-content",e.teilB,H),_("teil-c-content",e.teilC,F),q("faltstrategien-content",e.faltstrategieTexte),Y("abschiebsbriefe-content",e.abschiebsbriefe),Z("slideshow-container",e.zeichnungen),J("teil-d3-content",e.teilD3),_("teil-e-single-content",e.teilE.singleChoice,K),D("teil-e-likert-content",e.teilE.likert3,V),O("teil-a",n,t=>{D("teil-a-content",t.teilA)}),O("teil-b",n,t=>{_("teil-b-content",t.teilB,H)}),O("teil-c",n,t=>{_("teil-c-content",t.teilC,F),q("faltstrategien-content",t.faltstrategieTexte)}),O("teil-e",n,t=>{_("teil-e-single-content",t.teilE.singleChoice,K),D("teil-e-likert-content",t.teilE.likert3,V)})}catch(e){console.error("Failed to load data:",e),D("teil-a-content",[]),_("teil-b-content",[],H),_("teil-c-content",[],F),q("faltstrategien-content",[]),Y("abschiebsbriefe-content",[]),Z("slideshow-container",[]),J("teil-d3-content",[]),_("teil-e-single-content",[],K),D("teil-e-likert-content",[],V)}finally{document.body.classList.remove("loading-data")}});function O(e,n,t){const l=document.getElementById(`page-${e}`);if(!l)return;const s=l.querySelectorAll(".filter-btn");s.forEach(i=>{i.addEventListener("click",()=>{s.forEach(u=>u.classList.remove("active")),i.classList.add("active");const o=he(n,i.dataset.filter);t(o)})})}
